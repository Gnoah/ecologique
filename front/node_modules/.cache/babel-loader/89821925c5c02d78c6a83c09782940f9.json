{"ast":null,"code":"import _defineProperty from \"/home/dev/Bureau/simplon/Mon_projet_eco2/ecologique/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/dev/Bureau/simplon/Mon_projet_eco2/ecologique/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/dev/Bureau/simplon/Mon_projet_eco2/ecologique/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/dev/Bureau/simplon/Mon_projet_eco2/ecologique/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/dev/Bureau/simplon/Mon_projet_eco2/ecologique/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/dev/Bureau/simplon/Mon_projet_eco2/ecologique/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/dev/Bureau/simplon/Mon_projet_eco2/ecologique/front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/dev/Bureau/simplon/Mon_projet_eco2/ecologique/front/src/components/atelier/modifPub.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Button, Modal, ModalHeader, ModalBody, Form, FormGroup, Label, Input } from 'reactstrap';\n\nvar ItemModal =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ItemModal, _Component);\n\n  function ItemModal(props) {\n    var _this;\n\n    _classCallCheck(this, ItemModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ItemModal).call(this, props));\n\n    _this.toggle = function () {\n      _this.setState({\n        modal: !_this.state.modal\n      });\n    };\n\n    _this.state = {\n      titre: '',\n      description: '',\n      image: ''\n    };\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleEdit = _this.handleEdit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ItemModal, [{\n    key: \"onChange\",\n    value: function onChange(event) {\n      this.setState(_defineProperty({}, event.target.name, event.target.value));\n    }\n  }, {\n    key: \"handleEdit\",\n    value: function handleEdit(ev) {\n      var _this2 = this;\n\n      ev.preventDefault();\n      var data = new FormData();\n      data.append('image', this.uploadInput.files[0]);\n      data.append('titre', this.state.titre);\n      data.append('description', this.state.description);\n      console.log(this.props.id);\n      fetch('http://localhost:8080/atelier/' + this.props.id, {\n        method: 'PUT',\n        body: data\n      }).then(function (response) {\n        response.json().then(function (body) {\n          axios.get('http://localhost:8080/atelier/' + localStorage.getItem('id')).then(function (res) {\n            console.log(res.data);\n\n            _this2.setState({\n              atelier: res.data\n            });\n          });\n\n          _this2.setState({\n            image: \"http://localhost:8080/atelier/\".concat(body.photo)\n          });\n\n          console.log('photo eco :', body.photo);\n        });\n      });\n      this.toggle();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this.toggle,\n        id: \"boutton\",\n        className: \"btn edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-pen\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      })), React.createElement(Modal, {\n        isOpen: this.state.modal,\n        toggle: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(ModalHeader, {\n        toggle: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"Edit Atelier\"), React.createElement(ModalBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(Form, {\n        onSubmit: this.handleEdit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Atelier\"), React.createElement(Input, {\n        type: \"text\",\n        name: \"titre\",\n        ref: function ref(input) {\n          return _this3.getTitre = input;\n        },\n        validate: true,\n        success: \"right\",\n        value: this.state.value,\n        placeholder: \"Enter titre\",\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }), React.createElement(Input, {\n        type: \"text\",\n        name: \"description\",\n        ref: function ref(input) {\n          return _this3.getDescription = input;\n        },\n        validate: true,\n        success: \"right\",\n        value: this.state.value,\n        placeholder: \"Enter Description\",\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        ref: function ref(_ref) {\n          _this3.uploadInput = _ref;\n        },\n        type: \"file\",\n        name: \"image\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), React.createElement(Button, {\n        color: \"blue\",\n        style: {\n          marginTop: '2rem'\n        },\n        block: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Modifier\"))))));\n    }\n  }]);\n\n  return ItemModal;\n}(Component);\n\nexport { ItemModal as default };","map":{"version":3,"sources":["/home/dev/Bureau/simplon/Mon_projet_eco2/ecologique/front/src/components/atelier/modifPub.js"],"names":["React","Component","axios","Button","Modal","ModalHeader","ModalBody","Form","FormGroup","Label","Input","ItemModal","props","toggle","setState","modal","state","titre","description","image","onChange","bind","handleEdit","event","target","name","value","ev","preventDefault","data","FormData","append","uploadInput","files","console","log","id","fetch","method","body","then","response","json","get","localStorage","getItem","res","atelier","photo","input","getTitre","getDescription","ref","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport {\n  Button,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  Form,\n  FormGroup,\n  Label,\n  Input\n} from 'reactstrap';\n\nexport default class ItemModal extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n        titre: '',\n        description:'',\n        image: '',\n    }\n    this.onChange = this.onChange.bind(this)\n    this.handleEdit = this.handleEdit.bind(this);\n}\n\ntoggle = () => {\n  this.setState({\n    modal: !this.state.modal\n  });\n};\n\nonChange(event) {\n  this.setState({\n    [event.target.name]: event.target.value\n  })\n}\n  handleEdit(ev) {\n  ev.preventDefault();\n\n  const data = new FormData();\n    data.append('image', this.uploadInput.files[0]);\n    data.append('titre',this.state.titre);\n    data.append('description',this.state.description);\nconsole.log(this.props.id);\n\n\n  fetch('http://localhost:8080/atelier/'+ this.props.id, {\n\n    method: 'PUT',\n    body: data,\n  }).then((response) => {\n      \n    response.json().then((body) => {\n      axios.get('http://localhost:8080/atelier/'+ localStorage.getItem('id')).then(res=>{\n            console.log(res.data)\n            this.setState({atelier:res.data})\n        })\n      this.setState({ image: `http://localhost:8080/atelier/${body.photo}` });\n      console.log('photo eco :', body.photo);\n\n    });\n  });\n\n  this.toggle();\n}\n\n  \n\n  render() {\n    return (\n      <div>\n          <Button onClick={this.toggle} id=\"boutton\" className=\"btn edit\" ><i className=\"fas fa-pen\"></i></Button>\n        \n        <Modal isOpen={this.state.modal} toggle={this.toggle}>\n          <ModalHeader toggle={this.toggle}>Edit Atelier</ModalHeader>\n\n          <ModalBody>\n            <Form onSubmit={this.handleEdit}>\n              <FormGroup>\n                <Label for=\"item\">Atelier</Label>\n                <Input type=\"text\" name=\"titre\" ref={(input) => this.getTitre = input}\n                  validate success=\"right\" value={this.state.value} placeholder=\"Enter titre\" onChange={this.onChange}/>\n                <Input type=\"text\" name=\"description\" ref={(input) => this.getDescription = input}\n                 validate success=\"right\" value={this.state.value}placeholder=\"Enter Description\" onChange={this.onChange}/>\n                <input ref={(ref) => { this.uploadInput = ref; }} type=\"file\" name=\"image\" required />\n                <Button color=\"blue\" style={{ marginTop: '2rem' }} block>\n                  Modifier\n                </Button>\n              </FormGroup>\n            </Form>\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}